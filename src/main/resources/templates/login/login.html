<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/defaultLayout}"
      layout:fragment="Content">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
	
		<p>아이디 : <input type="text" id="id" placeholder="아이디" required></p>
		<p>비밀번호 : <input type="password" id="pw" placeholder="비밀번호" required></p>
		<button id="loginBtn">로그인</button>
	
	
	<script>
	 $(function() {
         //form submit 이벤트 핸들러 등록
         $('#loginBtn').on('click', function(e) {
            if ($('#id').val() == '') {
               alert('아이디를 입력하지 않으셨습니다.');
               e.preventDefault();
               return;
            }
            if ($('#pw').val() == '') {
               alert('비밀번호 입력하지 않으셨습니다.');
               e.preventDefault();
               return;

            }
            
            $.ajax({
               url: 'loginaction.do',
               type: 'POST',
               data: {
                  id:$('#id').val(),
                  pw:$('#pw').val() 
               },
               success: function(response) {
            	   console.log(response);
            	      if(response == null || response.length==0) {
            	    	  alert('아이디 혹은 비밀번호가 다릅니다.');
            	    	  $('#id').focus();
            	      }else {
            	    	  window.location.href='main.do';
            	      }
            	   }
            });
            
         });
      });
	</script>
</body>
</html>